<!DOCTYPE html>
<html>
<head>
  <title>Check Laundry Status</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <style>
    body{
      background:#f0f4f8;
      font-family:Poppins,sans-serif;
    }
    .status-card{
      max-width:450px;
      margin:80px auto;
      padding:30px;
      background:#fff;
      border-radius:15px;
      box-shadow:0 8px 20px rgba(0,0,0,0.1);
    }
    .status-result{
      margin-top:20px;
      padding:15px;
      border-radius:10px;
      display:none;
    }
  </style>
</head>

<body>

<div class="status-card">
  <h3 class="text-center mb-4">Check Delivery Status</h3>

  <input type="tel" id="phone" class="form-control mb-3" placeholder="Enter Mobile Number">

  <button class="btn btn-success w-100" onclick="checkStatus()">Check Status</button>

  <div id="result" class="status-result alert alert-info"></div>
</div>

<script>
/* ---------- Firebase ---------- */
var firebaseConfig = {
  apiKey: "AIzaSyA2y_ligs_fh3wTiACBCtC2nD-ZHRNGAA4",
  authDomain: "laundrybookingapp-81530.firebaseapp.com",
  databaseURL: "https://laundrybookingapp-81530-default-rtdb.firebaseio.com",
  projectId: "laundrybookingapp-81530",
  storageBucket: "laundrybookingapp-81530.appspot.com",
  messagingSenderId: "939691323210",
  appId: "1:939691323210:web:fb24301c4e338092341bb3"
};
firebase.initializeApp(firebaseConfig);

var bookingRef = firebase.database().ref("LaundryBookings");

/* ---------- CHECK STATUS ---------- */
function checkStatus(){
  var phone = document.getElementById("phone").value;
  var resultDiv = document.getElementById("result");
  resultDiv.style.display="none";

  if(phone===""){
    alert("Please enter mobile number");
    return;
  }

  bookingRef.once("value", function(snapshot){
    var found = false;

    snapshot.forEach(function(child){
      var d = child.val();

      if(d.phoneNumber === phone){
        found = true;
        resultDiv.style.display="block";
        resultDiv.innerHTML = `
          <b>Name:</b> ${d.customerName}<br>
          <b>Service:</b> ${d.serviceType}<br>
          <b>Delivery Date:</b> ${d.deliveryDate || "-"}<br>
          <b>Delivery Time:</b> ${d.deliveryTime || "-"}<br>
          <b>Status:</b> <span class="fw-bold text-success">${d.deliveryStatus || "Pending"}</span>
        `;
      }
    });

    if(!found){
      resultDiv.style.display="block";
      resultDiv.className="status-result alert alert-danger";
      resultDiv.innerHTML="No booking found for this number";
    }
  });
}
</script>

</body>
</html>